{% extends "layouts/base_layout.html" %}

{% block title %}Load Profile Creation - KSEB Energy Futures{% endblock %}

{% block content %}
<div class="module-container">
    <h2>Load Profile Generation: Creation & Configuration</h2>
    <p>Configure and generate synthetic load profiles based on demand scenarios and adjustments.</p>

    <div class="status-bar load-profile-status">
        <span><strong>Template Status:</strong> <span id="lp-template-status">Ready</span></span>
        <span><strong>Historical Years Available:</strong> <span id="lp-historical-years">2015-2023</span></span>
    </div>

    <div class="content-grid-load-profile">
        <section class="config-section-lp">
            <h3>Generation Method Configuration</h3>
            <div class="form-group">
                <label>Select Method:</label>
                <div class="radio-group-horizontal">
                    <div><input type="radio" id="method-scaling" name="generationMethod" value="scaling" checked><label for="method-scaling">Base Year Scaling</label></div>
                    <div><input type="radio" id="method-statistical" name="generationMethod" value="statistical"><label for="method-statistical">Statistical Pattern</label></div>
                    <div><input type="radio" id="method-ml" name="generationMethod" value="ml"><label for="method-ml">Machine Learning (Advanced)</label></div>
                </div>
            </div>

            <h4>Base Configuration</h4>
            <div class="form-group-inline">
                <div class="form-group">
                    <label for="lp-base-year">Base Year (for scaling/pattern):</label>
                    <select id="lp-base-year" name="baseYear">
                        <option value="2022">2022</option>
                        <option value="2023" selected>2023</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="lp-demand-scenario">Demand Scenario (for energy totals):</label>
                    <select id="lp-demand-scenario" name="demandScenario">
                        <option value="">Loading scenarios...</option>
                        <!-- Populated by JS -->
                    </select>
                </div>
            </div>

            <h4>Target Period</h4>
             <div class="form-group-inline">
                <div class="form-group">
                    <label for="lp-start-year">Start Year:</label>
                    <select id="lp-start-year" name="startYear">
                        <option value="2024">2024</option>
                        <option value="2025" selected>2025</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="lp-end-year">End Year:</label>
                    <select id="lp-end-year" name="endYear">
                        <option value="2030" selected>2030</option>
                        <option value="2035">2035</option>
                        <option value="2040">2040</option>
                    </select>
                </div>
            </div>

            <h4>Output Configuration</h4>
            <div class="form-group-inline">
                <div class="form-group">
                    <label for="lp-frequency">Frequency:</label>
                    <select id="lp-frequency" name="frequency">
                        <option value="hourly" selected>Hourly</option>
                        <option value="15min">15-minute</option>
                        <option value="daily">Daily (Average)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="lp-unit">Unit:</label>
                    <select id="lp-unit" name="unit">
                        <option value="MW" selected>MW (Average)</option>
                        <option value="kWh">kWh</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="lp-timezone">Time Zone:</label>
                    <select id="lp-timezone" name="timezone">
                        <option value="IST" selected>IST (Asia/Kolkata)</option>
                        <option value="UTC">UTC</option>
                    </select>
                </div>
            </div>
        </section>

        <section class="adjustments-section-lp">
            <h3>Load Shape Adjustments</h3>
            <div class="form-group">
                <label for="lp-peak-factor">Peak Load Factor (0.5 - 1.0):</label>
                <input type="range" id="lp-peak-factor" name="peakLoadFactor" min="0.5" max="1.0" value="0.85" step="0.01">
                <span class="range-value">0.85</span>
            </div>
            <div class="form-group">
                <label for="lp-base-factor">Base Load Factor (0.2 - 0.8):</label>
                <input type="range" id="lp-base-factor" name="baseLoadFactor" min="0.2" max="0.8" value="0.4" step="0.01">
                 <span class="range-value">0.40</span>
            </div>
            <div class="form-group">
                <label for="lp-seasonal-adjust">Seasonal Adjustments (e.g., Summer Peak %):</label>
                <input type="text" id="lp-seasonal-adjust" name="seasonalAdjustments" placeholder="+10% Summer, -5% Monsoon">
            </div>

            <h4>Special Day Profiles</h4>
            <div class="checkbox-group">
                <div><input type="checkbox" id="spd-holidays" name="specialDays" value="holidays" checked><label for="spd-holidays">National Holidays</label></div>
                <div><input type="checkbox" id="spd-weekends" name="specialDays" value="weekends" checked><label for="spd-weekends">Typical Weekends</label></div>
                <div><input type="checkbox" id="spd-custom" name="specialDays" value="custom"><label for="spd-custom">User-defined Special Days</label></div>
            </div>
        </section>
    </div>

    <div id="load-profile-preview-area" class="chart-placeholder" style="display:none; min-height:250px; margin-top:1.5rem;">
        <p>Load profile preview will appear here.</p>
        <div id="lp-preview-chart"></div>
    </div>

    <div class="form-actions">
        <button type="button" id="preview-load-profile-btn" class="btn-secondary">Preview Profile</button>
        <button type="button" id="generate-load-profile-btn" class="btn-primary">Generate Load Profile</button>
        <button type="button" id="advanced-options-lp-btn" class="btn-tertiary">Advanced Options</button>
    </div>
</div>
{% endblock %}
